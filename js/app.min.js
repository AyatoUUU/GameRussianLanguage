(()=>{"use strict";let e=!1;setTimeout((()=>{if(e){let e=new Event("windowScroll");window.addEventListener("scroll",(function(t){document.dispatchEvent(e)}))}}),0);new class{constructor(e){this.type=e}init(){this.оbjects=[],this.daClassname="_dynamic_adapt_",this.nodes=[...document.querySelectorAll("[data-da]")],this.nodes.forEach((e=>{const t=e.dataset.da.trim().split(","),n={};n.element=e,n.parent=e.parentNode,n.destination=document.querySelector(`${t[0].trim()}`),n.breakpoint=t[1]?t[1].trim():"767",n.place=t[2]?t[2].trim():"last",n.index=this.indexInParent(n.parent,n.element),this.оbjects.push(n)})),this.arraySort(this.оbjects),this.mediaQueries=this.оbjects.map((({breakpoint:e})=>`(${this.type}-width: ${e}px),${e}`)).filter(((e,t,n)=>n.indexOf(e)===t)),this.mediaQueries.forEach((e=>{const t=e.split(","),n=window.matchMedia(t[0]),i=t[1],o=this.оbjects.filter((({breakpoint:e})=>e===i));n.addEventListener("change",(()=>{this.mediaHandler(n,o)})),this.mediaHandler(n,o)}))}mediaHandler(e,t){e.matches?t.forEach((e=>{this.moveTo(e.place,e.element,e.destination)})):t.forEach((({parent:e,element:t,index:n})=>{t.classList.contains(this.daClassname)&&this.moveBack(e,t,n)}))}moveTo(e,t,n){t.classList.add(this.daClassname),"last"===e||e>=n.children.length?n.append(t):"first"!==e?n.children[e].before(t):n.prepend(t)}moveBack(e,t,n){t.classList.remove(this.daClassname),void 0!==e.children[n]?e.children[n].before(t):e.append(t)}indexInParent(e,t){return[...e.children].indexOf(t)}arraySort(e){"min"===this.type?e.sort(((e,t)=>e.breakpoint===t.breakpoint?e.place===t.place?0:"first"===e.place||"last"===t.place?-1:"last"===e.place||"first"===t.place?1:0:e.breakpoint-t.breakpoint)):e.sort(((e,t)=>e.breakpoint===t.breakpoint?e.place===t.place?0:"first"===e.place||"last"===t.place?1:"last"===e.place||"first"===t.place?-1:0:t.breakpoint-e.breakpoint))}}("max").init();const t=document.getElementById("buttonRepeatGame"),n=document.getElementById("modelWindow"),i=document.querySelector(".body"),o=document.querySelector(".game__start-window"),l=document.querySelector(".game__canvas"),a=document.querySelector(".game__task-block"),r=document.querySelector(".game__actions"),s=document.getElementById("checkUserAnswerBtn");let d,c,m=["модник","легкий","почему","трость","фигура","шифр","нос","мир","сон","снег","смех","жук","куб","рис","рак","уют","фея"],u=document.getElementsByClassName("letter"),h=[],p=0;const w={clickSound:new Audio("../img/audio/clickBtnSound.wav")};function f(){d=m[Math.floor(Math.random()*m.length)],m=m.filter((e=>e!==d)),c=d.split("");let e="";for(let t=0;t<c.length;t++)e+=`<button type='button' class='letter'>${c[t]}</button>`;a.innerHTML=e;for(let e=0;e<c.length;e++)"а"!=c[e]&&"у"!=c[e]&&"о"!=c[e]&&"ы"!=c[e]&&"э"!=c[e]&&"я"!=c[e]&&"ю"!=c[e]&&"ё"!=c[e]&&"и"!=c[e]&&"е"!=c[e]||h.push({letter:c[e],sound:"vowe",userAnswer:void 0}),"б"!=c[e]&&"в"!=c[e]&&"г"!=c[e]&&"д"!=c[e]&&"ж"!=c[e]&&"з"!=c[e]&&"й"!=c[e]&&"к"!=c[e]&&"л"!=c[e]&&"м"!=c[e]&&"н"!=c[e]&&"п"!=c[e]&&"р"!=c[e]&&"с"!=c[e]&&"т"!=c[e]&&"ф"!=c[e]&&"х"!=c[e]&&"ц"!=c[e]&&"ч"!=c[e]&&"ш"!=c[e]&&"щ"!=c[e]&&"ъ"!=c[e]&&"ь"!=c[e]||h.push({letter:c[e],sound:"consonant",userAnswer:void 0})}function y(){u=document.getElementsByClassName("letter");for(let e=0;e<u.length;e++){let t=u[e],n=!1;t.addEventListener("click",(function(){w.clickSound.play(),!1===n?(n=!0,t.style.color="#FF003D",h.forEach((e=>{e.letter==t.textContent&&(e.userAnswer="vowe")}))):(n=!1,t.style.color="#9747FF",h.forEach((e=>{e.letter==t.textContent&&(e.userAnswer="consonant")})))}))}}f();let g=0;function v(){p=0,T(),n.classList.remove("show-model"),i.classList.remove("locked"),E=0,A=0,S=0,b.innerText="00",k.innerText="00",x=setInterval(B,10)}s.addEventListener("click",(function(){w.clickSound.play(),h.forEach((e=>{e.userAnswer==e.sound&&g++})),h.length==g&&(++p,10==p&&(L(),n.classList.add("show-model"),i.classList.add("locked"),clearInterval(x)),h=[],f(),y(),g=0)})),t.addEventListener("click",(function(e){v()})),window.addEventListener("load",(function(){o.innerHTML='<button id="startGameBtn">Начать игру</button>';const e=document.getElementById("startGameBtn");e.addEventListener("click",(function(){l.style.filter="none",l.style.mixBlendMode="normal",e.style.display="none",w.clickSound.play(),o.style.display="none",r.style.display="inline-flex",s.style.display="inline-flex",x=setInterval(B,10),y()}))}));const b=document.querySelector(".seconds"),k=document.querySelector(".minutes");let x,E=0,A=0,S=0;function B(){E++,E>99&&(A++,b.innerText="0"+A,E=0),A>9&&(b.innerText=A),A>59&&(S++,k.innerText="0"+S,A=0,b.innerText="00"),S>9&&(k.innerText=S)}let L,q,M,T;!function(){L=a,q=r,M=function(){t?r():a()},T=function(){q(),i=[]};let e=["DodgerBlue","OliveDrab","Gold","Pink","SlateBlue","LightBlue","Violet","PaleGreen","SteelBlue","SandyBrown","Chocolate","Crimson"],t=!1,n=null,i=[],o=0;function l(t,n,i){return t.color=e[Math.random()*e.length|0],t.x=Math.random()*n,t.y=Math.random()*i-i,t.diameter=10*Math.random()+5,t.tilt=10*Math.random()-10,t.tiltAngleIncrement=.07*Math.random()+.05,t.tiltAngle=0,t}function a(){var e=window.innerWidth,a=window.innerHeight;window.requestAnimFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){return window.setTimeout(e,16.6666667)};let r=document.getElementById("confetti-canvas");null===r&&(r=document.createElement("canvas"),r.setAttribute("id","confetti-canvas"),r.setAttribute("style","display:block;z-index:999999;pointer-events:none;position:absolute;"),document.body.prepend(r),r.width=e,r.height=a,window.addEventListener("resize",(function(){r.width=window.innerWidth,r.height=window.innerHeight}),!0));let s=r.getContext("2d");for(;i.length<150;)i.push(l({},e,a));t=!0,null===n&&function e(){s.clearRect(0,0,window.innerWidth,window.innerHeight),0===i.length?n=null:(!function(){let e,n=window.innerWidth,a=window.innerHeight;o+=.01;for(let r=0;r<i.length;r++)e=i[r],!t&&e.y<-15?e.y=a+100:(e.tiltAngle+=e.tiltAngleIncrement,e.x+=Math.sin(o),e.y+=.5*(Math.cos(o)+e.diameter+2),e.tilt=15*Math.sin(e.tiltAngle)),(e.x>n+20||e.x<-20||e.y>a)&&(t&&i.length<=150?l(e,n,a):(i.splice(r,1),r--))}(),function(e){let t,n;for(var o=0;o<i.length;o++)t=i[o],e.beginPath(),e.lineWidth=t.diameter,e.strokeStyle=t.color,n=t.x+t.tilt,e.moveTo(n+t.diameter/2,t.y),e.lineTo(n,t.y+t.tilt+t.diameter/2),e.stroke()}(s),n=requestAnimFrame(e))}()}function r(){t=!1}}(),window.FLS=!0})();